### **Prompt：创建一个功能完整的 C++17 异步事件系统**

**核心目标：**
使用 C++17 设计并实现一个高性能、线程安全、且易于使用的异步事件（消息）分发系统。

**架构与设计要求：**

1.  **`EventCenter` (事件中心):**
    *   **单例模式 (Singleton):** 必须作为全局唯一的单例存在，提供一个静态的 `instance()` 方法来访问。
    *   **异步处理:** 内部必须包含一个**工作线程**来异步处理所有事件的分发。向事件中心发送事件的调用必须是**非阻塞**的。
    *   **懒加载 (Lazy Loading):** 工作线程不应在 `EventCenter` 构造时创建，而应在第一个事件被发送时才被“懒加载”创建，且需保证此创建过程是线程安全的（建议使用 `std::call_once`）。
    *   **线程安全:** 所有对外的公共接口（如注册/注销处理器、发送事件）都必须是线程安全的。
    *   **优雅关闭:** 在 `EventCenter` 析构时，需要能够优雅地通知工作线程处理完剩余所有事件后安全退出。应使用 `std::atomic<bool>` 作为关闭标志。

2.  **`IEventHandler` (事件处理器接口):**
    *   一个简单的抽象基类，作为所有具体事件处理器的接口。

3.  **`publish_event()` (全局事件发布函数):**
    *   提供一个全局的、模板化的辅助函数 `publish_event<TEvent>(const TEvent& event)`。
    *   这是系统中推荐的、唯一的事件发送方式，它提供了一种便捷的“即发即忘”机制，内部实现为获取 `EventCenter` 单例并调用其 `postEvent` 方法。

**功能性需求：**

*   可以方便地自定义任意事件类型。
*   事件处理器可以向 `EventCenter` 注册或注销对特定事件类型的监听。

**代码与交付物要求:**

1.  **`EventSystem.h`:** 包含 `EventCenter`、`IEventHandler` 和 `publish_event()` 完整实现的头文件。代码和注释必须使用清晰的**英文**。

2.  **`main.cpp`:** 一个用于**压力测试**的主程序文件。
    *   它应能启动多个生产者线程（建议数量与 `std::thread::hardware_concurrency()` 相同）。
    *   每个线程使用 `publish_event()` 并发地发送大量事件。
    *   需要有一个测试用的事件处理器，使用 `std::atomic` 计数器来统计接收到的事件总数。
    *   在所有事件发送完毕后，主线程需等待事件中心处理完所有消息，并最终验证**发送的事件总数**与**接收到的事件总数**是否完全一致，然后打印测试结果。

3.  **`CMakeLists.txt`:** 用于构建项目的 CMake 配置文件，需启用 C++17 标准。

4.  **`build.bat`:** 一个健壮的 Windows 批处理脚本，用于自动化整个构建流程，包括：创建构建目录、运行 CMake 配置、编译项目、以及最后在 `Debug` 或 `Release` 目录中找到并执行生成的主程序。
